<app-nav-menu-interna></app-nav-menu-interna>
<div class="container-fluid conteudo mt-0 ms-0 me-0 pt-0 ps-0 pe-0">
  <div class="row">
    <form [formGroup]="form" name="form">
      <div class="offset-1 col-10 mt-5 pt-0 ps-0 pe-0">
        <nav class="navbar navbar-expand-lg navbar-light bg-primary mt-0 pt-0 pb-0">
          <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="70px" height="32px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
               viewBox="0 0 324 148.998">
          <defs>
            <style type="text/css">
              .fil0 {
                fill: rgb(var(--bs-primary-rgb))
              }

              .fil1 {
                fill: rgb(var(--bs-icon-secondary-rgb))
              }
            </style>
          </defs>
          <g id="Layer_x0020_1">
            <metadata id="CorelCorpID_0Corel-Layer" />
            <rect class="fil0" x="-0.201492" y="-0.0493018" width="324.402" height="149.097" />
            <path class="fil1" d="M94.1079 -0.0507874l32.7768 0 0 91.9654c0,23.4224 11.7732,34.0512 35.1177,34.0512 23.3421,0 35.1248,-10.6264 35.1248,-33.8362l0 -92.1791 32.7638 0.0023622 0 93.4819c0,28.024 -11.6657,46.7291 -33.2185,55.6146l-69.3484 0c-21.5539,-8.88543 -33.2161,-27.5906 -33.2161,-55.6146l0 -93.4854 0 0z" />
          </g>
        </svg>
          <span class="navbar-text">
            <h5 class="subtitulo_barras_horizontais align-self-center text-success mt-0 mb-0 pt-0 pb-0">
              {{'homepage.queues.' + queueName|translate|uppercase}}&nbsp;
            </h5>
          </span>
        </nav>
      </div>
      <div class="offset-1 col-10 mt-5 pt-0 ps-0 pe-0">
        <ul class="nav nav-tabs" id="navTabs1_tabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link active activo_tabs activo-tabd" id="navTabs1_1_tab" data-bs-toggle="tab" href="#"
              data-bs-target="#navTabs1_1" role="tab" aria-controls="navTabs1_1"
              aria-selected="true">{{'acceptance.detail'|translate}}</a>
          </li>
          <li class="nav-item_x">
            <a class="nav-link" id="navTabs1_2_tab" data-bs-toggle="tab" href="#" data-bs-target="#navTabs1_2"
              role="tab" aria-controls="navTabs1_2" aria-selected="false" (click)="goToHistoryTab()">{{'acceptance.historic'|translate}}</a>
          </li>
          <li class="nav-item_x"></li>
          <li class="nav-item_x"></li>
        </ul>
        <div class="tab-content" id="navTabs1_content">
          <div class="tab-pane fade show active" id="navTabs1_1" role="tabpanel">
            <div class="container-fluid mt-0 ps-3 pe-3">
              <div class="row">
                <div class="bg-white align-self-center col-12 laterais_tabs mt-0 me-0 pt-4 ps-5 pe-5"
                     style="margin-left: 1px;">
                  <div class="row">
                    <div class="col bg-white">
                      <div class="row">
                        <div class="col bg-primary bg-opacity-10 mt-3 ms-3 pt-4 pb-3">
                          <div class="row ms-0 me-0 pe-0">
                            <div class="col-3 ms-3 pt-3 pb-3 ps-3 pe-0">
                              <p class="mb-0 text-end text-primary">{{'acceptance.processNumber'|translate}}</p>
                              <p class="mb-0 text-end text-primary">{{'acceptance.actualState'|translate}}</p>
                              <p class="mb-0 text-end text-primary">{{'acceptance.date'|translate}}</p>
                              <p class="mb-0 text-end text-primary">{{'acceptance.user'|translate}}</p>
                              <p class="mb-0 text-end text-primary">{{'acceptance.comments'|translate}}</p>
                            </div>
                            <div class="col bg-white bg-opacity-75 ms-3 me-0 pt-3 pb-3 pe-2">
                              <p class="mb-0 text-primary text-start">{{(processNumber == null) ? '-' : process.processNumber}}</p>
                              <p class="mb-0 text-primary text-start">
                                {{'homepage.' + queueName|translate}}
                              </p>
                              <p class="mb-0 text-primary text-start">{{(processHistoryItems.items[processHistoryItems.items.length - 1].whenStarted == null || processHistoryItems.items[processHistoryItems.items.length - 1].whenStarted == "") ? "-" : processHistoryItems.items[processHistoryItems.items.length - 1].whenStarted}}</p>
                              <p class="mb-0 text-primary text-start">{{(processHistoryItems.items[processHistoryItems.items.length - 1].whoFinished == null || processHistoryItems.items[processHistoryItems.items.length - 1].whoFinished == "") ? "-" : processHistoryItems.items[processHistoryItems.items.length - 1].whoFinished}}</p>
                              <p class="mb-0 text-primary text-start">
                                {{(processHistoryItems?.items[observationLength]?.observations == null || processHistoryItems?.items[observationLength]?.observations == "") ? "-" : processHistoryItems?.items[observationLength]?.observations}}
                              </p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <h3 class="text-primary mt-5 mb-0 ps-0" *ngIf="queueName === 'compliance' || queueName === 'DOValidation'">
                    <span class="assignment_returned icon-assignment-returned"></span>
                    &nbsp;{{'acceptance.returnReasons'|translate|uppercase}}
                  </h3>
                  <div class="row mt-0 ms-0 me-0 pt-0" *ngIf="queueName === 'compliance' || queueName === 'DOValidation'">
                    <div class="col-12 mt-4 pt-0 ps-0 pe-0">
                      <!--<div class="table-responsive mb-5 pb-4">
    <table class="table">
      <thead class="text-primary table-primary">
        <tr class="table-white text-primary">
          <th scope="col" class="text-center text-primary bg-light table-white">
            {{'acceptance.returnReason0'|translate}}
          </th>
          <th scope="col" class="text-center text-primary bg-light table-white">
            {{'acceptance.returnReason1'|translate}}
          </th>
          <th scope="col" class="text-center bg-white">{{'acceptance.returnReason2'|translate}}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let issue of issues?.process">
          <ng-container *ngIf="issue?.issueDescription != null && issue?.issueDescription != ''">
            <td class="text-primary text-center">Processo</td>
            <td class="text-primary text-center">-</td>
            <td class="text-primary text-start">{{issue?.issueDescription}}</td>
          </ng-container>
        </tr>
        <tr *ngFor="let issue of issues?.merchant?.issues">
          <ng-container *ngIf="issue?.issueDescription != null && issue?.issueDescription != ''">
            <td class="text-primary text-center">{{issues?.merchant?.merchant?.name}}</td>
            <td class="text-primary text-center">-</td>
            <td class="text-primary text-start">{{issue?.issueDescription}}</td>
          </ng-container>
        </tr>
        <ng-container *ngFor="let issue of issues?.stakeholders">
          <ng-container *ngFor="let iss of issue?.issues">
            <tr *ngIf="iss?.issueDescription != null && iss?.issueDescription != ''">
              <td class="text-primary text-center">{{issue?.stakeholder?.name}}</td>
              <td class="text-primary text-center">-</td>
              <td class="text-primary text-start">{{iss?.issueDescription}}</td>
            </tr>
          </ng-container>
        </ng-container>
        <ng-container *ngFor="let issue of issues?.shops">
          <ng-container *ngFor="let iss of issue?.issues">
            <tr *ngIf="iss?.issueDescription != null && iss?.issueDescription != ''">
              <td class="text-primary text-center">{{issue?.shop?.name}}</td>
              <td class="text-primary text-center">-</td>
              <td class="text-primary text-start">{{iss?.issueDescription}}</td>
            </tr>
          </ng-container>
        </ng-container>
        <ng-container *ngFor="let issue of issues?.documents">
          <ng-container *ngFor="let iss of issue?.issues">
            <tr *ngIf="iss?.issueDescription != null && iss?.issueDescription != ''">
              <td class="text-primary text-center">{{issue?.document?.name}}</td>
              <td class="text-primary text-center">{{issue?.document?.type}}</td>
              <td class="text-primary text-start">{{iss?.issueDescription}}</td>
            </tr>
          </ng-container>
        </ng-container>
      </tbody>
    </table>
  </div>-->
                      <div class="table-responsive mb-5 pb-4">
                        <mat-table [dataSource]="returnMat" class="table-responsive" matSort #returnSort="matSort" style="margin-left: auto; margin-right: auto; width: 95%;">
                          <ng-container matColumnDef="name">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'acceptance.returnReasons'|translate|uppercase}}
                            </mat-header-cell>
                            <mat-cell *matCellDef="let row"> {{row["name"]}} </mat-cell>
                          </ng-container>
                          <ng-container matColumnDef="type">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'acceptance.returnReason1'|translate|uppercase}}
                            </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{(row.type == null || row.type == '') ? '-' : row.type}}</mat-cell>
                          </ng-container>
                          <ng-container matColumnDef="issueDescription">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'acceptance.returnReason2'|translate|uppercase}}
                            </mat-header-cell>
                            <mat-cell *matCellDef="let row"> {{row.issueDescription}} </mat-cell>
                          </ng-container>
                          <mat-header-row *matHeaderRowDef="returnColumns"></mat-header-row>
                          <mat-row *matRowDef="let row; let idx = index; columns: returnColumns;">
                          </mat-row>
                        </mat-table>
                        <mat-paginator #paginatorReturn [pageSizeOptions]="[3, 10, 20]" showFirstLastButtons>
                        </mat-paginator>
                      </div>


                    </div>
                  </div>
                  <!-- Títulos - consoante a fila de trabalho -->

                  <h3 *ngIf="queueName === 'eligibility' || queueName === 'compliance'"
                      class="text-primary mt-5 mb-0 ps-0">
                    &nbsp;{{'stakeholder.title'|translate|uppercase}}
                  </h3>
                  <h3 *ngIf="queueName === 'risk'" class="text-primary mt-5 mb-0 ps-0">
                    &nbsp;{{'homepage.risk'|translate|uppercase}}
                  </h3>
                  <!--<h3 *ngIf="queueName === 'DOValidation'" class="text-primary mt-5 mb-0 ps-0">
    &nbsp;{{'acceptance.returnReasons'|translate|uppercase}}
  </h3>-->
                  <h3 *ngIf="queueName === 'multipleClients'" class="text-primary mt-5 mb-0 ps-0">
                    &nbsp;{{'queues.clientStake'|translate|uppercase}}
                  </h3>
                  <h3 *ngIf="queueName === 'negotiationAproval'" class="text-primary mt-5 mb-0 ps-0">
                    &nbsp;{{'stores.title'|translate|uppercase}}
                  </h3>
                  <h3 *ngIf="queueName === 'MCCTreatment'" class="text-primary mt-5 mb-0 ps-0">
                    &nbsp;MCC
                  </h3>

                  <!-- Tabela de Intervenientes/Merchant que tenham mais do que um valor -->
                  <div *ngIf="queueName==='multipleClients'" class="row mt-0 ms-0 me-0 pt-0">
                    <div class="col-12 mt-4 pt-0 ps-0 pe-0">

                      <div class="table-responsive mb-5 pb-4">
                        <mat-table [dataSource]="multipleStakeMat" class="table-responsive" matSort #multipleStakeSort="matSort" style="margin-left: auto; margin-right: auto; width: 95%;">
                          <ng-container matColumnDef="shortName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'stakeholder.name'|translate}}
                            </mat-header-cell>
                            <mat-cell *matCellDef="let row"> {{row.shortName}} </mat-cell>
                          </ng-container>
                          <ng-container matColumnDef="fiscalId">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              NIF/NIPC
                            </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.fiscalId}}</mat-cell>
                          </ng-container>
                          <ng-container matColumnDef="clientId">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'stakeholder.clientNumber'|translate}}
                            </mat-header-cell>
                            <mat-cell *matCellDef="let row"> {{(row["clientNumber"] == null || row["clientNumber"] == '') ? '-' : row["clientNumber"]}} </mat-cell>
                          </ng-container>
                          <mat-header-row *matHeaderRowDef="multipleStakeColumns"></mat-header-row>
                          <mat-row *matRowDef="let row; let idx = index; columns: multipleStakeColumns;" (click)="selectStake(row, idx)" [ngClass]="{'row-selected': idx === multipleStakeCurrentIdx}">
                          </mat-row>
                        </mat-table>
                        <mat-paginator #paginatorMultipleStake [pageSizeOptions]="[3, 10, 20]" showFirstLastButtons>
                        </mat-paginator>
                      </div>
                    </div>
                  </div>

                  <!-- Pesquisa da Fila Múltiplos Clientes -->
                  <div *ngIf="queueName === 'multipleClients'" class="offset-1 bg-white align-self-center col-10 ps-3"
                       style="margin-top: 15px; margin-left: 0px;">
                    <div class="row ms-0 me-0" *ngIf="selectedStake != null">
                      <div class="col-6 ms-0 me-0 ps-0 pe-5">
                        <p class="titulo-form-simples mt-0">{{'searches.documentType'|translate}}</p>
                        <select *ngIf="isCompany" id="select3" (change)="changeDocType()" name="documentType" formControlName="documentType" class="form-select campo_form" disabled>
                          <option *ngFor="let docType of ListaDocType" value={{docType.code}}>
                            {{docType.description}}
                          </option>
                        </select>
                        <select *ngIf="!isCompany" id="select3" (change)="changeDocType()" name="documentType" formControlName="documentType" class="form-select campo_form" disabled>
                          <option *ngFor="let docType of ListaDocTypeENI" value={{docType.code}}>
                            {{docType.description}}
                          </option>
                        </select>
                      </div>
                      <div class="col-6 ms-0 me-0 ps-0 pe-5">
                        <p class="titulo-form-simples" style="margin-top: 0px;">
                          {{'searches.documentNumber'|translate}}
                          <span class="titulo-form-error" *ngIf="incorrectCC" class="titulo-form-simples-erro">
                            {{'client.incorrectCC'|translate}}
                          </span>
                          <span class="titulo-form-error" *ngIf="incorrectCCSize"
                                class="titulo-form-simples-erro">
                            {{'client.incorrectCCSize'|translate}}
                          </span>
                          <span class="titulo-form-error" *ngIf="incorrectCCFormat"
                                class="titulo-form-simples-erro">
                            {{'client.incorrectCCFormat'|translate}}
                          </span>
                          <span class="titulo-form-error" *ngIf="incorrectNIF" class="titulo-form-simples-erro">
                            {{'client.incorrectNIF'|translate}}
                          </span>
                          <span class="titulo-form-error" *ngIf="incorrectNIFSize"
                                class="titulo-form-simples-erro">
                            {{'client.incorrectNIFSize'|translate}}
                          </span>
                          <span class="titulo-form-error" *ngIf="incorrectNIPCSize"
                                class="titulo-form-simples-erro">
                            {{'client.incorrectNIPCSize'|translate}}
                          </span>
                          <span class="titulo-form-error" *ngIf="incorrectNIPC" class="titulo-form-simples-erro">
                            {{'client.incorrectNIPC'|translate}}
                          </span>
                        </p>
                        <input id="text3" (keyup)="checkValidationType()" disabled
                        (keypress)="numericOnly($event)" name="documentNumber" formControlName="documentNumber" type="text" class="form-control campo_form"><!--formControlName=-->
                      </div>
                    </div>
                    <button *ngIf="selectedStake != null" id="btn5a6" class="btn botao_azul btn-lg ms-0 me-1" wappler-command="editContent" (click)="searchClient()" [disabled]="showFoundClient || canSearch == false || form.get('documentType').value.length == 0 || form.get('documentNumber').value.length == 0 || (selectedStake['clientNumber'] != null && selectedStake['clientNumber'] != '')">
                      {{'searches.search'|translate|uppercase}}
                      &nbsp;<img src="assets/images/search_white.svg" style="height: 30px; vertical-align: bottom;">
                    </button>
                    <div *ngIf="notFound" class="mt-3">
                      <p class="titulo-form-simples-erro">{{'client.searchError'|translate}}</p>
                    </div>
                  </div>

                  <!-- Tabela semelhante nas filas Elegibilidade e Risco -->
                  <div *ngIf="queueName!=='compliance' && queueName !== 'multipleClients' && queueName !== 'negotiationAproval' && queueName !== 'MCCTreatment' && queueName !== 'DOValidation' && queueName!=='validationSIBS'"
                       class="row mt-0 ms-0 me-0 pt-0">
                    <div class="col-12 mt-4 pt-0 ps-0 pe-0" *ngIf="riskFinished">
                      <div class="table-responsive mb-5 pb-4">
                        <table class="table">
                          <thead class="text-primary table-primary">
                            <tr class="table-white text-primary">
                              <th scope="col" class="text-center text-primary bg-light table-white">
                                {{'stakeholder.name'|translate}}
                              </th>
                              <th scope="col" class="text-center bg-light">NIF/NIPC</th>
                              <th scope="col" class="text-center bg-white">{{'stakeholder.clientNumber'|translate}}</th>
                              <th scope="col" *ngIf="queueName === 'eligibility'" class="text-center bg-white">
                                {{'acceptance.eligibility'|translate}}
                              </th>
                              <th scope="col" *ngIf="queueName === 'risk'" class="text-center bg-white">
                                {{'queues.amlLevel'|translate}}
                              </th>
                              <th scope="col" *ngIf="queueName === 'risk'" class="text-center bg-white">
                                {{'queues.hits'|translate}}
                              </th>
                              <th scope="col" *ngIf="queueName === 'risk'" class="text-center bg-white">
                                {{'queues.risk'|translate}}
                              </th>
                            </tr>
                          </thead>
                          <tbody *ngIf="queueName === 'risk'">
                            <tr *ngIf="merchant?.riskAssessmentTenant?.hasRisk == 'RequireComplianceEvaluation'">
                              <td class="text-primary text-center">{{merchant?.legalName}}</td>
                              <td class="text-primary text-center">{{merchant?.fiscalId}}</td>
                              <td class="text-primary text-center">{{(merchant?.clientId == null || merchant?.clientId == "") ? "-" : merchant?.clientId}}</td>
                              <td *ngIf="queueName === 'risk'" class="text-primary text-center">{{merchant?.riskAssessmentTenant?.riskLevel}}</td>
                              <td *ngIf="queueName === 'risk'" class="text-primary text-center">{{getHits(merchant?.riskAssessmentTenant)}}</td>
                              <td class="text-primary text-center">
                                <input class="form-check-input" type="radio" [value]=true id="radio8" name="merchantEligibility"
                                       style="margin-left: 5px; margin-right: 5px;" formControlName="merchantEligibility"
                                       (click)="check()"><label class="form-check-label radio"
                                                                for="merchantEligibility">{{'queues.favorable'|translate}}&nbsp;</label>

                                <input class="form-check-input" style="margin-left: 15px; margin-right: 5px;"
                                       formControlName="merchantEligibility" type="radio" [value]=false id="radio8"
                                       name="merchantEligibility" (click)="uncheck()"><label class="form-check-label radio pe-5"
                                                                                             for="merchantEligibility">{{'queues.unfavorable'|translate}}&nbsp;</label>
                              </td>
                            </tr>
                            <tr *ngFor="let stake of stakesList">
                              <ng-container *ngIf="stake?.riskAssessmentTenant?.hasRisk == 'RequireComplianceEvaluation'" formGroupName="stakeholdersEligibility">
                                <td class="text-primary text-center">{{stake.shortName}}</td>
                                <td class="text-primary text-center">{{stake.fiscalId}}</td>
                                <td class="text-primary text-center">{{stake.clientId}}</td>
                                <td *ngIf="queueName === 'risk'" class="text-primary text-center">{{stake?.riskAssessmentTenant?.riskLevel}}</td>
                                <td *ngIf="queueName === 'risk'" class="text-primary text-center">{{getHits(stake?.riskAssessmentTenant)}}</td>
                                <td class="text-primary text-center">
                                  <input class="form-check-input" type="radio" [value]=true id="radio8" name="{{stake.id}}"
                                         style="margin-left: 5px; margin-right: 5px;" formControlName="{{stake.id}}"
                                         (click)="check()"><label class="form-check-label radio"
                                                                  for="{{stake.id}}">{{'queues.favorable'|translate}}&nbsp;</label>

                                  <input class="form-check-input" style="margin-left: 15px; margin-right: 5px;"
                                         formControlName="{{stake.id}}" type="radio" [value]=false id="radio8"
                                         name="{{stake.id}}" (click)="uncheck()"><label class="form-check-label radio pe-5"
                                                                                        for="{{stake.id}}">{{'queues.unfavorable'|translate}}&nbsp;</label>
                                </td>
                              </ng-container>
                            </tr>
                          </tbody>

                          <tbody *ngIf="queueName === 'eligibility'">
                            <tr *ngIf="merchant?.eligibilityAssessmentTenant == 'RequiresManualAssessment'">
                              <td class="text-primary text-center">{{merchant?.legalName}}</td>
                              <td class="text-primary text-center">{{merchant?.fiscalId}}</td>
                              <td class="text-primary text-center">{{(merchant?.clientId == null || merchant?.clientId == "") ? "-" : merchant?.clientId}}</td>
                              <td class="text-primary text-center">
                                <input class="form-check-input" type="radio" [value]=true id="radio8" name="merchantEligibility"
                                       style="margin-left: 5px; margin-right: 5px;" formControlName="merchantEligibility"
                                       (click)="check()"><label class="form-check-label radio"
                                                                for="merchantEligibility">{{'queues.favorable'|translate}}&nbsp;</label>

                                <input class="form-check-input" style="margin-left: 15px; margin-right: 5px;"
                                       formControlName="merchantEligibility" type="radio" [value]=false id="radio8"
                                       name="merchantEligibility" (click)="uncheck()"><label class="form-check-label radio pe-5"
                                                                                             for="merchantEligibility">{{'queues.unfavorable'|translate}}&nbsp;</label>
                              </td>
                            </tr>
                            <tr *ngFor="let stake of stakesList">
                              <ng-container *ngIf="stake?.eligibilityAssessmentTenant == 'RequiresManualAssessment'" formGroupName="stakeholdersEligibility">
                                <td class="text-primary text-center">{{stake.shortName}}</td>
                                <td class="text-primary text-center">{{stake.fiscalId}}</td>
                                <td class="text-primary text-center">{{stake.clientId}}</td>
                                <td class="text-primary text-center">
                                  <input class="form-check-input" type="radio" [value]=true id="radio8" name="{{stake.id}}"
                                         style="margin-left: 5px; margin-right: 5px;" formControlName="{{stake.id}}"
                                         (click)="check()"><label class="form-check-label radio"
                                                                  for="{{stake.id}}">{{'queues.favorable'|translate}}&nbsp;</label>

                                  <input class="form-check-input" style="margin-left: 15px; margin-right: 5px;"
                                         formControlName="{{stake.id}}" type="radio" [value]=false id="radio8"
                                         name="{{stake.id}}" (click)="uncheck()"><label class="form-check-label radio pe-5"
                                                                                        for="{{stake.id}}">{{'queues.unfavorable'|translate}}&nbsp;</label>
                                </td>
                              </ng-container>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>

                  <!--Tabela da fila Dúvidas Compliance -->
                  <div *ngIf="queueName==='compliance'" class="row mt-0 ms-0 me-0 pt-0">
                    <div class="col-12 mt-4 pt-0 ps-0 pe-0">
                      <div class="table-responsive mb-5 pb-4">
                        <table class="table">
                          <thead class="text-primary table-primary">
                            <tr class="table-white text-primary">
                              <th scope="col" class="text-center text-primary bg-light table-white">
                                {{'stakeholder.name'|translate}}
                              </th>
                              <th scope="col" class="text-center bg-light">NIF</th>
                              <th scope="col" class="text-center bg-white">{{'stakeholder.clientNumber'|translate}}</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let stake of stakesList">
                              <td class="text-primary text-center">{{stake?.shortName}}</td>
                              <td class="text-primary text-center">{{stake?.fiscalId}}</td>
                              <td class="text-primary text-center">{{(stake?.clientId == null || stake?.clientId == "") ? "-" : stake?.clientId}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>

                  <!-- Tabela da fila de Múltiplos Clientes -->
                  <div *ngIf="queueName === 'multipleClients' && showFoundClient" class="row mt-0 ms-0 me-0 pt-0">
                    <div class="col-12 mt-4 pt-0 ps-0 pe-0">
                      <div class="table-responsive mb-5 pb-4">
                        <mat-table [dataSource]="clientsMat" class="table-responsive" matSort style="margin-left: auto; margin-right: auto; width: 95%;">
                          <ng-container matColumnDef="clientId">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'client.number'|translate}}
                            </mat-header-cell>
                            <mat-cell *matCellDef="let client"> {{client.clientId}} </mat-cell>
                          </ng-container>
                          <ng-container matColumnDef="commercialName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'client.nameSocialDesignation'|translate}}
                            </mat-header-cell>
                            <mat-cell *matCellDef="let client">{{client.commercialName}}</mat-cell>
                          </ng-container>
                          <ng-container matColumnDef="fiscalId">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              NIF
                            </mat-header-cell>
                            <mat-cell *matCellDef="let client"> {{client.fiscalId}} </mat-cell>
                          </ng-container>
                          <ng-container matColumnDef="documentType">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'searches.documentType'|translate}}
                            </mat-header-cell>
                            <mat-cell *matCellDef="let client"> {{client.documentType}} </mat-cell>
                          </ng-container>
                          <ng-container matColumnDef="documentNumber">
                            <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'searches.documentNumber'|translate}}
                            </mat-header-cell>
                            <mat-cell *matCellDef="let client"> {{client.documentNumber}} </mat-cell>
                          </ng-container>
                          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                          <mat-row *matRowDef="let client; let idx = index; columns: displayedColumns;">
                          </mat-row>
                        </mat-table>
                        <mat-paginator #paginator [pageSizeOptions]="[3, 10, 20]" showFirstLastButtons>
                        </mat-paginator>
                      </div>
                    </div>
                  </div>
                  <!-- Tabela da fila de MCC -->
                  <div *ngIf="queueName === 'MCCTreatment' || queueName === 'negotiationAproval'" class="row mt-0 ms-0 me-0 pt-0">
                    <div class="col-12 mt-4 pt-0 ps-0 pe-0">
                      <div class="table-responsive mb-2 ps-2 pe-2">
                        <table mat-table [dataSource]="storesMat" class="table-responsive" matSort #sortStore="matSort" style=" margin-left: auto; margin-right: auto; width: 95%;">
                          <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'stores.name'|translate|uppercase}}
                            </th>
                            <td mat-cell *matCellDef="let store" class="text-primary bg-light table-white"> {{store.name}} </td>
                          </ng-container>
                          <ng-container matColumnDef="activity">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'stores.activity'|translate|uppercase}}
                            </th>
                            <td mat-cell *matCellDef="let store" class="text-primary bg-light table-white"> {{getActivityDescription(store.activity)}} </td>
                          </ng-container>
                          <ng-container matColumnDef="subActivity">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                              {{'stores.subActivity'|translate|uppercase}}
                            </th>
                            <td mat-cell *matCellDef="let store" class="text-primary bg-light table-white"> {{getSubActivityDescription(store.subActivity)}} </td>
                          </ng-container>
                          <tr mat-header-row *matHeaderRowDef="displayedColumnsStore"></tr>
                          <tr mat-row *matRowDef="let store; let idx = index; columns: displayedColumnsStore;" (click)="emitSelectedStore(store, idx)"
                              [ngClass]="{'row-selected': idx === currentIdx}">
                          </tr>
                        </table>
                        <mat-paginator #paginatorStore [pageSizeOptions]="[3, 10, 20]" showFirstLastButtons>
                        </mat-paginator>
                      </div>
                    </div>
                  </div>

                  <div *ngIf="queueName === 'MCCTreatment' && currentStore != null && MCCFinished" class="row mt-0 ms-0 me-0 pt-0">
                    <div class="col-12 mt-4 pt-0 ps-0 pe-0">
                      <div class="table-responsive mb-5 pb-4">
                        <table class="table">
                          <thead class="text-primary table-primary">
                            <tr class="table-white text-primary">
                              <th scope="col" class="text-center bg-white">{{'queues.functionalityType'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.subFunctionality'|translate}}</th>
                              <th scope="col" class="text-center bg-white">MCC</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let industry of currentStore?.industryClassifications">
                              <ng-container formGroupName="shopsMCC">
                                <td class="text-primary text-center">{{industry?.paymentSchemeAttributeDescription}}</td>
                                <td class="text-primary text-center">{{industry?.subPaymentSchemeAttributeDescription == null ? '-' : industry?.subPaymentSchemeAttributeDescription}}</td>
                                <td class="text-primary text-center" *ngIf="industry.industryClassificationCode != null && industry.industryClassificationCode != ''">
                                  <select [attr.disabled]="true" class="form-select campo-form-select" name="{{currentStore.id + industry.industryClassificationCode}}" formControlName="{{currentStore.id + industry.industryClassificationCode}}">
                                    <option value="{{industry.industryClassificationCode}}">{{industry.industryClassificationDescription}}</option>
                                  </select>
                                </td>
                                <td class="text-primary text-center" *ngIf="industry.industryClassificationCode == null || industry.industryClassificationCode == ''">
                                  <select class="form-select campo-form-select" name="{{currentStore.id + industry.paymentSchemeAttributeId + industry.subPaymentSchemeAttributeId}}" formControlName="{{currentStore.id + industry.paymentSchemeAttributeId + industry.subPaymentSchemeAttributeId}}">
                                    <option *ngFor="let value of industry.industryClassificationPotentialCodes" value="{{value.code}}">{{value.description}}</option>
                                  </select>
                                </td>
                              </ng-container>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>

                  <!-- Tabela da Fila de Negociação -->
                  <h3 *ngIf="queueName === 'negotiationAproval' && currentStore != null" class="text-primary mt-5 mb-0 ps-0">
                    &nbsp;{{'queues.precarious'|translate|uppercase}}
                  </h3>
                  <div *ngIf="queueName === 'negotiationAproval' && currentStore != null" class="row mt-0 ms-0 me-0 pt-0">
                    <div class="col-12 mt-4 pt-0 ps-0 pe-0">
                      <div class="table-responsive mb-5 pb-4">
                        <table class="table">
                          <thead class="text-primary table-primary">
                            <tr class="table-white text-primary">
                              <th scope="col" class="text-center text-primary bg-light table-white">
                                {{'queues.pack'|translate}}
                              </th>
                              <th scope="col" class="text-center bg-light">{{'queues.denomination'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.minInitialValue'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.minFinalValue'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.maxInitialValue'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.maxFinalValue'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.initialValue'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.finalValue'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.initialTSC'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.finalTSC'|translate}}</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let commissionAttr of currentStore?.pack?.commission?.attributes">
                              <td class="text-primary text-center">{{currentStore?.pack?.packId}}</td>
                              <td class="text-primary text-center">{{commissionAttr?.description}}</td>
                              <td class="text-primary text-center" [style]="commissionAttr?.minValue?.originalValue != commissionAttr?.minValue?.finalValue ? 'color: red !important;' : ''">{{commissionAttr?.minValue?.originalValue}}</td>
                              <td class="text-primary text-center" [style]="commissionAttr?.minValue?.originalValue != commissionAttr?.minValue?.finalValue ? 'color: red !important;' : ''">{{commissionAttr?.minValue?.finalValue}}</td>
                              <td class="text-primary text-center" [style]="commissionAttr?.maxValue?.originalValue != commissionAttr?.maxValue?.finalValue ? 'color: red !important;' : ''">{{commissionAttr?.maxValue?.originalValue}}</td>
                              <td class="text-primary text-center" [style]="commissionAttr?.maxValue?.originalValue != commissionAttr?.maxValue?.finalValue ? 'color: red !important;' : ''">{{commissionAttr?.maxValue?.finalValue}}</td>
                              <td class="text-primary text-center" [style]="commissionAttr?.fixedValue?.originalValue != commissionAttr?.fixedValue?.finalValue ? 'color: red !important;' : ''">{{commissionAttr?.fixedValue?.originalValue}}</td>
                              <td class="text-primary text-center" [style]="commissionAttr?.fixedValue?.originalValue != commissionAttr?.fixedValue?.finalValue ? 'color: red !important;' : ''">{{commissionAttr?.fixedValue?.finalValue}}</td>
                              <td class="text-primary text-center" [style]="commissionAttr?.percentageValue?.originalValue != commissionAttr?.percentageValue?.finalValue ? 'color: red !important;' : ''">{{commissionAttr?.percentageValue?.originalValue}}</td>
                              <td class="text-primary text-center" [style]="commissionAttr?.percentageValue?.originalValue != commissionAttr?.percentageValue?.finalValue ? 'color: red !important;' : ''">{{commissionAttr?.percentageValue?.finalValue}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="table-responsive mb-5 pb-4">
                        <table class="table">
                          <thead class="text-primary table-primary">
                            <tr class="table-white text-primary">
                              <th scope="col" class="text-center text-primary bg-light table-white">
                                {{'queues.terminals'|translate}}
                              </th>
                              <th scope="col" class="text-center bg-light">{{'queues.denomination'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.initialValue'|translate}}</th>
                              <th scope="col" class="text-center bg-white">{{'queues.finalValue'|translate}}</th>
                            </tr>
                          </thead>
                          <tbody>
                            <ng-container *ngFor="let equipment of equipmentList">
                              <ng-container *ngIf="equipment['shopId'] == currentStore.id">
                                <tr>
                                  <td class="text-primary text-center">TPA</td>
                                  <td class="text-primary text-center">Mensalidade 1</td>
                                  <td class="text-primary text-center" [style]="equipment?.pricing?.attribute?.originalValue != equipment?.pricing?.attribute?.finalValue ? 'color: red !important;' : ''">{{equipment?.pricing?.attribute?.originalValue}}</td>
                                  <td class="text-primary text-center" [style]="equipment?.pricing?.attribute?.originalValue != equipment?.pricing?.attribute?.finalValue ? 'color: red !important;' : ''">{{equipment?.pricing?.attribute?.finalValue}}</td>
                                </tr>
                              </ng-container>
                            </ng-container>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>

                  <!-- Tabela de Fila Validação Matrícula SIBS -->
                  <div *ngIf="queueName === 'validationSIBS'" class="row ms-0 me-0">
                    <div class="mt-4 pt-0 ps-0 pe-4 col-6" *ngIf="finished">
                      <div class="table-responsive mb-5">
                        <table class="table">
                          <thead class="text-primary table-primary">
                            <tr class="table-white text-primary">
                              <th scope="col" class="text-center text-primary bg-light table-white">
                                {{'queues.merchantName'|translate}}
                              </th>
                              <th scope="col" class="text-center bg-light" style="white-space: nowrap;">
                                {{'queues.enrollmentMerchantNumber'|translate}}
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td class="text-primary text-center">
                                {{merchant?.legalName}}
                              </td>
                              <td class="text-primary text-center">
                                <input type="text" name="enrollmentMerchantNumber" formControlName="enrollmentMerchantNumber" value="{{merchant?.merchantRegistrationId}}" 
                                       class="micro_campo_tabela texto_centrado ps-0 pe-0 form-control-sm" />
                              </td>
                            </tr>
                            <tr>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="col mt-4 ps-4 pe-0" *ngIf="finished">
                      <div class="table-responsive mb-5">
                        <table class="table">
                          <thead class="text-primary table-primary">
                            <tr class="table-white text-primary">
                              <th scope="col" class="text-center text-primary bg-light table-white">
                                {{'queues.storeName'|translate}}
                              </th>
                              <th scope="col" class="text-center bg-light">
                                {{'queues.enrollmentStoreNumber'|translate}}
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let shop of shopsList">
                              <ng-container formGroupName="shops">
                                <td class="text-primary text-center">{{shop.name}}</td>
                                <td class="text-primary text-center">
                                  <input type="text" name="{{shop.id}}" formControlName="{{shop.id}}" value="{{shop.registrationId}}"
                                         class="micro_campo_tabela texto_centrado ps-0 pe-0 form-control-sm" />
                                </td>
                              </ng-container>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="row ms-0 me-0">
                      <div class="col-9 mt-4 mb-0 pt-0 pb-0 ps-0 pe-0">
                        <div class="table-responsive mb-5">
                          <table class="table">
                            <thead class="text-primary table-primary">
                              <tr class="table-white text-primary">
                                <th scope="col" class="text-center text-primary bg-light table-white">
                                  {{'queues.storeName'|translate}}
                                </th>
                                <th scope="col" class="text-center bg-light">
                                  {{'commercialOffer.terminal'|translate}}
                                </th>
                                <th scope="col" class="text-center bg-white">
                                  {{'queues.enrollmentTerminalNumber'|translate}}
                                </th>
                              </tr>
                            </thead>
                            <tbody>
                              <ng-container *ngFor="let shop of shopsList">
                                <tr *ngFor="let equip of equipmentList" >
                                  <ng-container *ngIf="shop.id === equip['shopId']" formGroupName="equipments">
                                    <td class="text-primary text-center">{{shop.name}}</td>
                                    <td class="text-primary text-center">{{equip.shopEquipmentId}}</td>
                                    <td class="text-center text-primary">
                                      <input type="text" name="{{equip.shopEquipmentId}}" formControlName="{{equip.shopEquipmentId}}"
                                             value="{{equip.registrationId}}" class="micro_campo_tabela texto_centrado ps-0 pe-0 form-control-sm" />
                                    </td>
                                  </ng-container>
                                </tr>
                              </ng-container>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Anexar -->
                  <div *ngIf="queueName !== 'multipleClients' && queueName!=='MCCTreatment' && queueName!=='validationSIBS'"
                       class="row mt-0 ms-0 me-0 pt-0">
                    <p class="titulo-form-simples mb-3" wappler-command="editContent">
                      {{'queues.attach.title'|translate}}
                    </p>
                    <div class="table-responsive mb-2">
                      <table class="table">
                        <thead class="text-primary table-primary">
                          <tr class="table-white text-primary">
                            <th scope="col" class="text-center text-primary bg-light table-white">
                              {{'generalKeywords.type'|translate|uppercase}}
                            </th>
                            <th scope="col" class="text-center bg-light">
                              {{'generalKeywords.documentDate'|translate|uppercase}}
                            </th>
                            <th scope="col" class="text-center text-primary bg-light table-white"></th>
                          </tr>
                        </thead>
                        <tbody *ngIf="attach !== undefined">
                          <tr *ngFor="let file of files">
                            <td class="text-primary text-center">{{attach.tipo|translate}}</td>
                            <td class="text-primary text-center">{{attach.dataDocumento}}</td>
                            <td>
                              <span class="search-blue icon-search-blue" (click)="openFile(file)">
                              </span>
                              <span class="delete-blue-comp icon-delete-blue" (click)="deleteFile(file)">
                              </span>
                            </td>
                          </tr>
                          <tr></tr>
                          <tr></tr>
                        </tbody>
                      </table>
                    </div>
                    <nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-start align-items-center mb-4">
                      <span class="navbar-text align-self-center mt-0 ms-0 me-0 pt-0">
                        <ng-container>
                          <input type="file" multiple #fileUpload name="arquivo" id="arquivo" class="uploadInput" (change)="selectFile($event); fileUpload.value='';"
                                 style="display: none" accept=".pdf" required [disabled]="(queueName == 'risk' && currentUser.permissions != UserPermissions.COMPLIANCEOFFICE) || (queueName == 'eligibility' && currentUser.permissions != UserPermissions.UNICRE && currentUser.permissions != UserPermissions.CALLCENTER && currentUser.permissions != UserPermissions.COMERCIAL) || ((queueName == 'DOValidation' || queueName == 'negotiationAproval') && currentUser.permissions != UserPermissions.DO) || (queueName == 'compliance' && currentUser.permissions != UserPermissions.COMPLIANCEOFFICE)">
                          <label for="arquivo" id="btn5a5"
                                 class="uploadLabel btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-0 mb-0 ms-0 me-0 pt-3 pb-3 ps-3"
                                 wappler-command="editContent">
                            {{'generalKeywords.attach'|translate}}&nbsp;
                            <img src="assets/images/attach_file_white.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </label>
                        </ng-container>
                      </span>
                    </nav>
                  </div>
                  <!-- Observações -->
                  <p *ngIf="queueName!=='compliance' && queueName!=='MCCTreatment'" style="margin-top: 0px !important;"
                     class="titulo-form-simples mt-5 pt-2">
                    {{'acceptance.comments'|translate}}:
                  </p>
                  <p *ngIf="queueName==='compliance'" style="margin-top: 0px !important;"
                     class="titulo-form-simples mt-5 pt-2">
                    {{'acceptance.commentsCompliance'|translate}}:
                  </p>
                  <div class="col pb-4" style="padding-left: 0px !important;">
                    <!-- [(ngModel)]="fillComments" -->
                    <textarea *ngIf="queueName!=='MCCTreatment'" formControlName="observation" name="observation" id="text1"
                              class="form-control"></textarea>
                    <!-- Botões Final de Página consoante as Filas de Trabalho -->
                    <div class="col mt-4 ms-0 ps-0">
                      <hr>
                      <nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-start align-items-center mb-4">
                        <span class="navbar-text me-2 align-self-center ms-0 me-0">
                          <button id="btn5a1" [routerLink]="['/']"
                                  class="btn botao_branco center-align text-start vertical-align baseline; btn-lg mt-3 mb-0 ms-0 me-2 pt-3 pb-3 ps-3 pe-3"
                                  wappler-command="editContent">
                            {{'generalKeywords.exit'|translate|uppercase}}&nbsp;
                            <span class="exit-to-app icon-exit-to-app"></span>
                          </button>
                          <button id="btn5a2"
                                  *ngIf="queueName==='compliance' || queueName==='risk' || queueName==='eligibility'"
                                  [disabled]="!form.valid || (queueName == 'risk' && currentUser.permissions != UserPermissions.COMPLIANCEOFFICE) || (queueName == 'eligibility' && (currentUser.permissions != UserPermissions.UNICRE && currentUser.permissions != UserPermissions.CALLCENTER && currentUser.permissions != UserPermissions.COMERCIAL) || (queueName == 'compliance' && currentUser.permissions != UserPermissions.COMPLIANCEOFFICE))"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  (click)="concludeOpinion()" wappler-command="editContent">
                            {{'queues.completed'|translate|uppercase}}&nbsp;
                            <img src="assets/images/queues/conclude_opinion.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2" *ngIf="queueName==='DOValidation'"
                                  [disabled]="!form.valid || (currentUser.permissions != UserPermissions.COMPLIANCEOFFICE && currentUser.permissions != UserPermissions.DO)"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent" (click)="concludeOpinion('ReturnToBackOffice')">
                            {{'queues.returnBackoffice'|translate|uppercase}}&nbsp;
                            <img src="assets/images/assignment_return_white.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2" *ngIf="queueName==='DOValidation'"
                                  [disabled]="!form.valid || (currentUser.permissions != UserPermissions.COMPLIANCEOFFICE && currentUser.permissions != UserPermissions.DO)"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent" (click)="concludeOpinion('ReturnToFrontOffice')">
                            {{'queues.returnComercial'|translate|uppercase}}&nbsp;
                            <img src="assets/images/queues/return_comercial.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2" *ngIf="queueName==='DOValidation'"
                                  [disabled]="!form.valid || (currentUser.permissions != UserPermissions.COMPLIANCEOFFICE && currentUser.permissions != UserPermissions.DO)"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent" (click)="concludeOpinion('ReturnToComplianceEvaluation')">
                            {{'queues.returnCoff'|translate|uppercase}}&nbsp;
                            <img src="assets/images/queues/return_coff.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2" *ngIf="queueName === 'multipleClients'" [disabled]="form.get('observation').value.length == 0 || currentUser.permissions != UserPermissions.DO" (click)="concludeOpinion('ReturnToFrontOffice')"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent">
                            {{'queues.returnComercial'|translate|uppercase}}&nbsp;
                            <img src="assets/images/queues/return_comercial.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2" *ngIf="queueName === 'multipleClients'" [disabled]="!allStakesSearched || currentUser.permissions != UserPermissions.DO" (click)="concludeOpinion('Continue')"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent">
                            {{'queues.treated'|translate|uppercase}}&nbsp;
                            <img src="assets/images/queues/tratado.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2" *ngIf="queueName === 'negotiationAproval'"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent" (click)="concludeOpinion('Accepted')" [disabled]="currentUser.permissions != UserPermissions.DO">
                            {{'queues.approve'|translate|uppercase}}&nbsp;
                            <img src="assets/images/queues/aprovar.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2"
                                  *ngIf="queueName === 'negotiationAproval' || queueName === 'validationSIBS'"
                                  [disabled]="form.get('observation').value.length == 0 || currentUser.permissions != UserPermissions.DO" (click)="concludeOpinion('ReturnToFrontOffice')"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent">
                            {{'queues.return'|translate|uppercase}}&nbsp;
                            <img src="assets/images/queues/devolver.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2" *ngIf="queueName === 'validationSIBS'"
                                  [disabled]="!form.valid || currentUser.permissions != UserPermissions.DO" (click)="concludeOpinion('Continue')"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent">
                            {{'queues.conclude'|translate|uppercase}}&nbsp;
                            <img src="assets/images/queues/concluir.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2" *ngIf="queueName === 'MCCTreatment'" (click)="concludeOpinion()"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent" [disabled]="!form.valid || currentUser.permissions != UserPermissions.DO">
                            {{'queues.concludeMCC'|translate|uppercase}}&nbsp;
                            <img src="assets/images/queues/concluir-mcc.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>

                          <button id="btn5a2" (click)="nextPage()" *ngIf="queueName !== 'multipleClients'"
                                  class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                  wappler-command="editContent">
                            {{'generalKeywords.next'|translate|uppercase}}&nbsp;
                            <img src="assets/images/arrow_forward_ios.svg"
                                 style="height: 25px !important; vertical-align: sub;">
                          </button>
                        </span>
                      </nav>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Histórico -->
          <div class="tab-pane fade" id="navTabs1_2" role="tabpanel">
            <div class="container-fluid mt-0 ps-3 pe-3">
              <div class="row">
                <div class="bg-white align-self-center col-12 laterais_tabs2 mt-0 ms-0 me-0 pt-5 ps-5 pe-5">
                  <!--<div class="table-responsive mb-5">
                    <table class="table">
                      <thead class="text-primary table-primary">
                        <tr class="table-white text-primary">
                          <th scope="col" class="text-center text-primary bg-light table-white">
                            {{'acceptance.requestNumber'|translate}}
                          </th>
                          <th scope="col" class="text-center bg-light">{{'acceptance.state'|translate}}</th>
                          <th scope="col" class="text-center bg-white">{{'acceptance.stateDate'|translate}}</th>
                          <th scope="col" class="text-center bg-white">{{'acceptance.user'|translate}}</th>
                          <th scope="col" class="text-center bg-white">{{'acceptance.comments'|translate}}</th>
                        </tr>
                      </thead>
                      <tbody *ngIf="ready">
                        <tr *ngFor="let history of processHistoryItems?.items" (click)="getHistoryIssueDetails(history.historyGuid)" [ngClass]="{'row-selected': history.historyGuid == selectedHistoryGuid}">
                          <td class="text-primary text-center">{{(processNumber == null) ? '-' : process.processNumber}}</td>
                          <td class="text-primary text-center">{{history.processState}}</td>
                          <td class="text-primary text-center">{{history.whenStarted | date: 'yyyy-MM-dd HH:mm'}}</td>
                          <td class="text-primary text-center">{{history.whoStarted}}</td>
                          <td class="text-primary text-center">{{(history.observations == null || history.observations == "") ? "-" : history.observations}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>-->
                  <div class="table-responsive mb-5 pb-4">
                    <mat-table [dataSource]="historyMat" class="table-responsive" matSort #historySort="matSort" style="margin-left: auto; margin-right: auto; width: 95%;">
                      <ng-container matColumnDef="processNumber">
                        <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                          {{'acceptance.requestNumber'|translate}}
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row"> {{(processNumber == null) ? '-' : process.processNumber}} </mat-cell>
                      </ng-container>
                      <ng-container matColumnDef="processState">
                        <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                          {{'acceptance.state'|translate}}
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row">{{row.processState}}</mat-cell>
                      </ng-container>
                      <ng-container matColumnDef="whenStarted">
                        <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                          {{'acceptance.stateDate'|translate}}
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row"> {{row.whenStarted | date: 'yyyy-MM-dd HH:mm'}} </mat-cell>
                      </ng-container>
                      <ng-container matColumnDef="whoFinished">
                        <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                          {{'acceptance.user'|translate}}
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row"> {{row.whoFinished}} </mat-cell>
                      </ng-container>
                      <ng-container matColumnDef="observations">
                        <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                          {{'acceptance.comments'|translate}}
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row"> {{(row.observations == null || row.observations == "") ? "-" : row.observations}} </mat-cell>
                      </ng-container>
                      <mat-header-row *matHeaderRowDef="historyColumns"></mat-header-row>
                      <mat-row *matRowDef="let row; let idx = index; columns: historyColumns;" (click)="getHistoryIssueDetails(row.historyGuid)" [ngClass]="{'row-selected': row.historyGuid == selectedHistoryGuid}">
                      </mat-row>
                    </mat-table>
                    <mat-paginator #paginatorHistory [pageSizeOptions]="[3, 10, 20]" showFirstLastButtons>
                    </mat-paginator>
                  </div>
                  
                </div>
                <div class="bg-white align-self-center col-12 laterais_tabs4 mt-0 ms-0 me-0 pt-5 ps-5 pe-5">
                  <h3 class="text-primary mt-5 mb-0 ps-0">
                    <span class="assignment_returned icon-assignment-returned"></span>
                    <!--<img src="assets/images/assignment_returned.svg"
    style="height: 30px; vertical-align: bottom;">-->
                    &nbsp;{{'acceptance.returnReasons'|translate|uppercase}}
                  </h3>
                  <!--<div class="table-responsive mb-5">
    <table class="table">
      <thead class="text-primary table-primary">
        <tr class="table-white text-primary">
          <th scope="col" class="text-center text-primary bg-light table-white">
            {{'acceptance.returnReason0'|translate}}
          </th>
          <th scope="col" class="text-center bg-light">{{'acceptance.returnReason1'|translate}}</th>
          <th scope="col" class="text-center text-primary bg-light table-white">
            {{'acceptance.returnReason2'|translate}}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let issue of selectedIssue?.process">
          <ng-container *ngIf="issue?.issueDescription != '' && issue?.issueDescription != null">
            <td class="text-primary text-center">Processo</td>
            <td class="text-primary text-center">-</td>
            <td class="text-primary text-start">{{issue?.issueDescription}}</td>
          </ng-container>
        </tr>
        <tr>
          <ng-container *ngIf="selectedIssue?.merchant?.issues[0]?.issueDescription != null && selectedIssue?.merchant?.issues[0]?.issueDescription != ''">
            <td class="text-primary text-center">
              {{ selectedIssue?.merchant?.merchant?.name }}
            </td>
            <td class="text-primary text-center">-</td>
            <td class="text-primary text-start">{{selectedIssue?.merchant?.issues[0]?.issueDescription}}</td>
          </ng-container>
        </tr>
        <tr *ngFor="let issue of selectedIssue?.stakeholders">
          <ng-container *ngIf="issue?.issues[0]?.issueDescription != null && issue?.issues[0]?.issueDescription != ''">
            <td class="text-primary text-center">{{issue?.stakeholder?.name}}</td>
            <td class="text-primary text-center">-</td>
            <td class="text-primary text-start">{{issue?.issues[0]?.issueDescription}}</td>
          </ng-container>
        </tr>
        <tr *ngFor="let issue of selectedIssue?.shops">
          <ng-container *ngIf="issue?.issues[0]?.issueDescription != null && issue?.issues[0]?.issueDescription != ''">
            <td class="text-primary text-center">{{issue?.shop?.name}}</td>
            <td class="text-primary text-center">-</td>
            <td class="text-primary text-start">{{issue?.issues[0]?.issueDescription}}</td>
          </ng-container>
        </tr>
        <tr *ngFor="let issue of selectedIssue?.documents">
          <ng-container *ngIf="issue?.issues[0]?.issueDescription != null && issue?.issues[0]?.issueDescription != ''">
            <td class="text-primary text-center">{{issue?.document?.name}}</td>
            <td class="text-primary text-center">{{issue?.document?.type}}</td>
            <td class="text-primary text-start">{{issue?.issues[0]?.issueDescription}}</td>
          </ng-container>
        </tr>
      </tbody>
    </table>
  </div>-->
                  <div class="table-responsive mb-5 pb-4">
                    <mat-table [dataSource]="returnSelectedMat" class="table-responsive" matSort #returnSelectedSort="matSort" style="margin-left: auto; margin-right: auto; width: 95%;">
                      <ng-container matColumnDef="name">
                        <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                          {{'acceptance.returnReasons'|translate|uppercase}}
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row"> {{row["name"]}} </mat-cell>
                      </ng-container>
                      <ng-container matColumnDef="type">
                        <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                          {{'acceptance.returnReason1'|translate|uppercase}}
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row">{{(row.type == null || row.type == '') ? '-' : row.type}}</mat-cell>
                      </ng-container>
                      <ng-container matColumnDef="issueDescription">
                        <mat-header-cell *matHeaderCellDef mat-sort-header class="text-center text-primary bg-light table-white">
                          {{'acceptance.returnReason2'|translate|uppercase}}
                        </mat-header-cell>
                        <mat-cell *matCellDef="let row"> {{row.issueDescription}} </mat-cell>
                      </ng-container>
                      <mat-header-row *matHeaderRowDef="returnSelectedColumns"></mat-header-row>
                      <mat-row *matRowDef="let row; let idx = index; columns: returnSelectedColumns;">
                      </mat-row>
                    </mat-table>
                    <mat-paginator #paginatorSelectedReturn [pageSizeOptions]="[3, 10, 20]" showFirstLastButtons>
                    </mat-paginator>
                  </div>


                  <div class="col mt-4 ms-0 ps-0">
                    <hr>
                    <nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-start align-items-center mt-2 mb-4 pt-0">
                      <span class="navbar-text me-2 align-self-center ms-0 me-0">
                        <button id="btn5a1" [routerLink]="['/']"
                                class="btn botao_branco center-align text-start vertical-align baseline; btn-lg mt-3 mb-0 ms-0 me-2 pt-3 pb-3 ps-3 pe-3"
                                wappler-command="editContent">
                          {{'generalKeywords.exit'|translate|uppercase}}&nbsp;
                          <span class="exit-to-app icon-exit-to-app"></span>
                        </button>
                        <button id="btn5a2" (click)="nextPage()" *ngIf="queueName !== 'multipleClients'"
                                class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3"
                                wappler-command="editContent">
                          {{'generalKeywords.next'|translate|uppercase}}&nbsp;
                          <img src="assets/images/arrow_forward_ios.svg"
                               style="height: 25px !important; vertical-align: sub;">
                        </button>
                      </span>
                    </nav>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
