<app-nav-menu-interna></app-nav-menu-interna>
<div class="container-fluid conteudo mt-0 ms-0 me-0 pt-0 ps-0 pe-0">
  <div class="row">
    <div class="offset-1 col-10 bg-primary mt-5 pt-0 ps-0 pe-0">
      <nav class="navbar navbar-expand-lg navbar-light bg-primary mt-0 pt-0 pb-0">
        <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="70px" height="32px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
             viewBox="0 0 324 148.998">
          <defs>
            <style type="text/css">
              .fil0 {
                fill: rgb(var(--bs-primary-rgb))
              }

              .fil1 {
                fill: rgb(var(--bs-icon-secondary-rgb))
              }
            </style>
          </defs>
        <g id="Layer_x0020_1">
          <metadata id="CorelCorpID_0Corel-Layer" />
          <rect class="fil0" x="-0.201492" y="-0.0493018" width="324.402" height="149.097" />
          <path class="fil1" d="M94.1079 -0.0507874l32.7768 0 0 91.9654c0,23.4224 11.7732,34.0512 35.1177,34.0512 23.3421,0 35.1248,-10.6264 35.1248,-33.8362l0 -92.1791 32.7638 0.0023622 0 93.4819c0,28.024 -11.6657,46.7291 -33.2185,55.6146l-69.3484 0c-21.5539,-8.88543 -33.2161,-27.5906 -33.2161,-55.6146l0 -93.4854 0 0z" />
        </g>
        </svg>
        <span class="navbar-text">
          <h5 class="subtitulo_barras_horizontais align-self-center text-success mt-0 mb-0 pt-0 pb-0" *ngIf="queueName == ''">
            {{'stakeholder.title'|translate|uppercase}}
          </h5>
          <h5 class="subtitulo_barras_horizontais align-self-center text-success mt-0 mb-0 pt-0 pb-0" *ngIf="queueName != ''">
            {{queueName + ' | ' + title |uppercase}}
          </h5>
        </span>
      </nav>
    </div>
    <div class="offset-1 bg-white align-self-center col-10 mt-0 pt-2 ps-0">
      <div class="bg-white align-self-center col-12 mt-0 ms-0 me-0 pt-5"><!--*ngIf="!editStakeInfo"-->
        <div class="accordion1 accordion-flush" id="accordionFlushExample1">
          <div class="accordion1-item">
            <h2 class="accordion1-header" id="flush-headingFour">
              <button class="accordion1-button" type="button" data-bs-toggle="collapse"
                data-bs-target="#flush-collapseFour" aria-expanded="true" aria-controls="flush-collapseFour">
                <span class="material-symbols-outlined icon-accordion group-add-blue-stake icon-group-add-blue">
                  <!--<img src="assets/images/group_add_blue.svg" class="img_add" />-->
                </span>&nbsp;&nbsp;{{'stakeholder.title'|translate|uppercase}}
              </button>
            </h2>
            <div id="flush-collapseFour" class="accordion-collapse collapse show" aria-labelledby="flush-headingFour"
              data-bs-parent="#accordionFlushExample1">
              <app-stakeholders-list [submissionId]="submissionId" [processNumber]="processNumber"
                [canSelect]=editStakeInfo [canDelete]=!editStakeInfo [insertStakeholderEvent]="insertStakeholderEvent"
                (selectedStakeholderEmitter)="selectStake($event)" [updatedStakeholderEvent]="updatedStakeholderEvent"
                [previousStakeholderEvent]="previousStakeholderEvent" (listLengthEmitter)="getStakesListLength($event)"
                [sameNIFEvent]="sameNIFEvent" (sameNIFEmitter)="isSameNIF($event)" (stakeExistsEmitter)="stakeExists($event)" (visitedStakesEmitter)="checkVisitedStakes($event)" [isInfoDeclarativa]=editStakeInfo>
              </app-stakeholders-list>
            </div>
          </div>
        </div>
      </div>


      <ng-container *ngIf="editStakeInfo == true" [formGroup]="editStakes">
        <div class="bg-white align-self-center col-10 mt-0 pt-2 ps-0" style="width: auto;">
          <div class="accordion1 accordion-flush" id="accordionFlushExample">

            <!--<div class="accordion1-item">
                <h2 class="accordion1-header" id="flush-headingOne">
                  <button class="accordion1-button" type="button"
                          data-bs-target="#flush-collapseOne" aria-expanded="true" aria-controls="flush-collapseOne">
                    <span class="material-symbols-outlined icon-accordion">
                      <img src="assets/images/groups.svg" class="img_add" />
                    </span>&nbsp;&nbsp;{{'stakeholder.title'|translate|uppercase}}
                  </button>
                </h2>
                <div id="flush-collapseOne" class="accordion-collapse collapse show" aria-labelledby="flush-headingOne">-->
            <!-- data-bs-parent="#accordionFlushExample" -->
            <!--<app-stakeholders-list [submissionId]="submissionId" [processNumber]="processNumber" [canDelete]=false (selectedStakeholderEmitter)="selectStake($event)" [updatedStakeholderEvent]="updatedStakeholderEvent" [previousStakeholderEvent]="previousStakeholderEvent" (listLengthEmitter)="getStakesListLength($event)" [isInfoDeclarativa]=true>-->
            <!-- [canDelete]=true -->
            <!--</app-stakeholders-list>
                </div>
              </div>-->

            <div class="accordion1-item">
              <h2 class="accordion1-header" id="flush-headingTwo">
                <button class="accordion1-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                  <span class="material-symbols-outlined icon-accordion groups-3 icon-groups-3">
                    <!--<img src="assets/images/groups_3.svg" class="img_add">-->
                  </span>&nbsp;&nbsp;{{'stakeholder.identification'|translate|uppercase}}
                </button>
              </h2>
              <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo">
                <app-new-stakeholder [currentStakeholder]="currentStakeholder"
                  [parentFormGroup]="editStakes.get('stake')"
                  [selectedStakeholderIsFromCRC]="selectedStakeholderIsFromCRC"></app-new-stakeholder>
              </div>
            </div>

            <div class="accordion1-item">
              <h2 class="accordion1-header" id="flush-headingThree">
                <button class="accordion1-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
                  <span class="material-symbols-outlined icon-accordion folder-shared icon-folder-shared">
                    <!--<img src="assets/images/folder_shared.svg" class="img_add" />-->
                  </span>&nbsp;&nbsp;{{'stakeholder.documents'|translate|uppercase}}
                </button>
              </h2>
              <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree">
                <ng-container>
                  <!--<div class="bg-white align-self-center col-12 mt-0 ms-0 me-0 pt-5" *ngIf="selectedStakeholderComprovativos != null">-->
                  <p class="titulo-form-simples ps-3 m-4"
                    *ngIf="selectedStakeholderComprovativos == null || selectedStakeholderComprovativos?.length == 0">
                    {{'supportingDocuments.documentsListEmpty'|translate}}</p>
                  <div class="table-responsive me-2 ps-3 pe-3">
                    <table class="table table-success" *ngIf="selectedStakeholderComprovativos?.length > 0">
                      <thead class="text-primary table-primary">
                        <tr class="table-light text-center text-primary">
                          <th scope="col" class="align-baseline text-primary table-white">
                            {{'supportingDocuments.type'|translate}}</th>
                          <th scope="col" class="text-center bg-light">{{'supportingDocuments.receptionDate'|translate}}
                          </th>
                          <th scope="col" class="text-center bg-white">{{'generalKeywords.expirationDate'|translate}}
                          </th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let doc of selectedStakeholderComprovativos">
                          <td class="text-primary text-center">{{doc.documentType}}</td>
                          <td class="text-primary text-center">{{doc.receivedAt}}</td>
                          <td class="text-primary text-center">{{doc.validUntil}}</td>
                          <td>
                            <span class="search-blue icon-search-blue" (click)="loadStakeholderDocument(doc.uniqueReference)">
                              <!-- mÃ©todo antigo do click => b64toBlob(doc.uniqueReference, 'application/pdf', 512) -->
                              <!--<img src="assets/images/search_blue.svg"
                                (click)="loadStakeholderDocument(doc.uniqueReference)"
                                style="height: 25px !important; vertical-align: sub; cursor: pointer;" />-->
                            </span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </ng-container>
                <!--</div>-->
              </div>
            </div>

          </div>
        </div>
      </ng-container>

      <ng-container>
        <div class="align-self-center col-12 mt-4 ms-0 me-0 ps-0 pe-0">
          <nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-start align-items-center mb-4">
            <span class="navbar-text me-2">
              <button *ngIf="clickButton !== false && editStakeInfo !== true" [routerLink]="['/']" id="btn5a5"
                class="btn botao_branco center-align text-start vertical-align baseline; btn-lg mt-3 mb-0 ms-0 me-2 pt-3 pb-3 ps-3 pe-3"
                wappler-command="editContent">
                {{'generalKeywords.exit'|translate|uppercase}}&nbsp;
                <span class="exit-to-app icon-exit-to-app"></span>
                <!--<img src="assets/images/exit_to_app.svg"
                  style="height: 25px !important; vertical-align: sub;">-->
              </button>
              <button *ngIf="editStakeInfo !== true" id="btn5a2" (click)="redirectAddStakeholder()"
                class="btn botao_branco center-align text-start vertical-align baseline; btn-lg mt-3 mb-0 ms-0 me-2 pt-3 pb-3 ps-3 pe-3"
                wappler-command="editContent" [disabled]="returned === 'consult'">
                {{'stakeholder.add'|translate|uppercase}}&nbsp;
                <img src="assets/images/person_add_blue.svg" class="img_btn">
              </button>
              <button id="btn5a4" *ngIf="clickButton !== false && editStakeInfo !== true"
                class="btn botao_azul center-align text-start vertical-align: baseline; mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3 btn-lg"
                wappler-command="editContent" (click)="goToClientById()">
                <img src="assets/images/arrow_back_ios_white.svg" style="height: 25px !important; vertical-align: sub;"
                  class="img_add">
                {{'generalKeywords.back'|translate|uppercase}}&nbsp;
              </button>
              <button id="btn5a3" *ngIf="clickButton !== false && editStakeInfo !== true"
                class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-0 pt-3 pb-3 ps-3"
                wappler-command="editContent" (click)="redirectInfoStakeholder();"> <!--[disabled]="stakesLength === 0"-->
                {{'generalKeywords.next'|translate|uppercase}}&nbsp;<span class="material-symbols-rounded m-align">
                  <img src="assets/images/angle-right-solid.svg" style="height: 25px !important;">
                </span>
              </button>
            </span>
          </nav>
        </div>
      </ng-container>
      <ng-container *ngIf="editStakeInfo == true">
        <div class="align-self-center col-12 mt-4 ms-0 me-0 ps-0 pe-0">
          <nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-start align-items-center mb-4">
            <span class="navbar-text me-2">
              <button [routerLink]="['/']" id="btn5a5"
                class="btn botao_branco center-align text-start vertical-align baseline; btn-lg mt-3 mb-0 ms-0 me-2 pt-3 pb-3 ps-3 pe-3"
                wappler-command="editContent">
                {{'generalKeywords.exit'|translate|uppercase}}&nbsp;<img src="assets/images/exit_to_app.svg"
                  style="height: 25px !important; vertical-align: sub;">
              </button>
              <button [routerLink]="['/']" id="btn5a5"
                class="btn botao_branco center-align text-start vertical-align baseline; btn-lg mt-3 mb-0 ms-2 me-2 pt-3 pb-3 ps-3 pe-3"
                wappler-command="editContent">{{'generalButtons.cancel'|translate|uppercase}}&nbsp;
                <span class="cancel icon-cancel"></span>
                <!--<img src="assets/images/exit_to_app.svg" style="height: 25px !important; vertical-align: sub;">-->
              </button>
              <button id="btn5a4"
                class="btn botao_azul center-align text-start vertical-align: baseline; mt-3 mb-0 ms-2 me-1 pt-3 pb-3 ps-3 btn-lg"
                wappler-command="editContent" (click)="refreshPage()">
                <img src="assets/images/arrow_back_ios_white.svg" style="height: 25px !important; vertical-align: sub;"
                  class="img_add">
                {{'generalKeywords.back'|translate|uppercase}}&nbsp;
              </button>
            </span>
            <span class="navbar-text me-2">
              <button id="btn5a3"
                class="btn botao_azul center-align center-align text-start vertical-align: baseline; btn-lg mt-3 mb-0 ms-2 me-0 pt-3 pb-3 ps-3"
                wappler-command="editContent" (click)="submit()"
                [disabled]="((stakesLength === 0 || !editStakes.controls['stake'].valid) && returned != 'consult')">
                {{'generalKeywords.next'|translate|uppercase}}&nbsp;<span class="material-symbols-rounded m-align">
                  <img src="assets/images/angle-right-solid.svg" style="height: 25px !important;">
                </span>
              </button>
            </span>
          </nav>
        </div>
      </ng-container>
    </div>

  </div>
</div>
<ng-container [formGroup]="editStakes">
  <app-create-stakeholder *ngIf="editStakeInfo == false" [parentFormGroup]="editStakes.get('searchAddStakes')"
    [sameNIFStake]="sameNIFStake" [submissionClient]="submissionClient"
    (insertedStakeSubject)="emitInsertedStake($event)" (canceledSearch)="emitCanceledSearch($event)"
    (sameNIF)="emitStakeNIF($event)"></app-create-stakeholder>
</ng-container>
